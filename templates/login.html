<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>CodeItNow</title>

  <link rel="icon" href="/static/favicon.png">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/css/mdb.min.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="google-signin-scope" content="profile email">
  <meta name="google-signin-client_id" content={{key}}>

  <style type="text/css" media="screen">
    body {
        background-color:white;
    }

    .main {
        margin-top:80px;
        margin-bottom: 20px;
        margin-left: auto;
        margin-right: auto;
    }

    nav {
        height: 10%;
    }
  </style>
</head>
<body>

    <!--Main Navigation-->
    <nav class="navbar fixed-top navbar-dark brown scrolling-navbar">
        <a class="navbar-brand" href="#"><strong>CodeItNow</strong></a>
    </nav>
    <!--Main Navigation-->

    <div class="main col-6">
        <div class="card" style="padding:16px;background-color: burlywood;">
            <center>
                <img src="/static/cin-logo-med.png" style="height: 250px;">
                <h1>Code It Now</h1>
                <!-- <p style="font-weight:400;font-size:20px;">A barebones IDE made with <i class="fa fa-heart" style="color:#DC143C;"></i> by your fellow batchmates!</p> -->
                <p style="font-weight:400;font-size:20px;">'Coz code never lies</p>
                <div id="my-signin2"></div>
                <br>
            </center>
        </div>

        <div class="card" style="margin-top: 2%;padding: 5%;background-color: burlywood;">
            <h3 style="font-weight: 300;">Powered by:</h3>
            <table style="width: 100%;table-layout: fixed;height: auto;">
                <tr>
                    <td width="(100/3)%">
                        <center>
                            <img src="/static/ace-logo.png" style="width: 65%;height: auto;">
                        </center>
                    </td>
                    <td width="(100/3)%">
                        <img src="/static/flask-logo.png" style="width: 100%;height: auto;">
                    </td>
                    <td width="(100/3)%">
                        <img src="/static/docker-logo.png" style="width: 100%;height: auto;">
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        function renderButton() {
          gapi.signin2.render('my-signin2', {
            'scope': 'profile email',
            'width': 240,
            'height': 50,
            'longtitle': true,
            'theme': 'light',
            'onsuccess': onSignIn,
          });
        }
        function onSignIn(googleUser) {
          var profile = googleUser.getBasicProfile();
        //   console.log("ID: " + profile.getId());
        //   console.log('Full Name: ' + profile.getName());
        //   console.log('Given Name: ' + profile.getGivenName());
        //   console.log('Family Name: ' + profile.getFamilyName());
        //   console.log("Image URL: " + profile.getImageUrl());
        //   console.log("Email: " + profile.getEmail());
          var id_token = googleUser.getAuthResponse().id_token;
        //   console.log("ID Token: " + id_token);
          document.cookie = "id="+id_token+"; path=/";
          document.cookie = "name="+profile.getName()+"; path=/";
          document.cookie = "imgurl="+profile.getImageUrl()+"; path=/";
          document.location.href = '/main'
        };
    </script>

    <!-- Google SignIn -->
    <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/js/mdb.min.js"></script>

</body>
</html>
